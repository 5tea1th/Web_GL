<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flappy Bird WebGL</title>
    <style>
        body { margin: 0; overflow: hidden; }
        canvas { display: block; }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const gl = canvas.getContext('webgl');

        // Set canvas size
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        gl.viewport(0,0,canvas.width,canvas.height);

        const bird = {
            x: 100,
            y: canvas.height / 2,
            width: 20,
            height: 15,
            velocity: 0,
            gravity: 0.6,
            lift: -10,
        };
        let obstacles = [];
        const obstacleWidth = 50;
        const obstacleGap = 170;
        const obstacleSpeed = 5;

        function initShaders() {
            // Vertex shader
            const vertexShaderSource = `
                attribute vec2 a_position;
                uniform vec2 u_resolution;
                void main() {
                    vec2 zeroToOne = a_position / u_resolution;
                    vec2 zeroToTwo = zeroToOne * 2.0;
                    vec2 clipSpace = zeroToTwo - 1.0;
                    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);
                }
            `;
            const vertexShader = createShader(gl.VERTEX_SHADER, vertexShaderSource);


            // Fragment shader
            const fragmentShaderSource = `
                precision mediump float;
                uniform vec4 u_color;
                void main() {
                    gl_FragColor = u_color;
                }
            `;
            const fragmentShader = createShader(gl.FRAGMENT_SHADER, fragmentShaderSource);


            // Link shaders into a program
            const program = createProgram(vertexShader, fragmentShader);
            gl.useProgram(program);


            return program;
        }
        function createShader(type, source) {
            const shader = gl.createShader(type);
            gl.shaderSource(shader, source);
            gl.compileShader(shader);
            if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
                console.error('Shader compile failed with: ' + gl.getShaderInfoLog(shader));
                gl.deleteShader(shader);
                return null;
            }
            return shader;
        }

    </script>
</body>
</html>